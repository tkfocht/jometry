<html>
    <head>
        <title>J!ometry: Daily Jeopardy Visualizations</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/site.css"></link>
        <script src="/js/d3/d3.v7.min.js"></script>
        <script src="/js/util/util.js"></script>
    </head>
    <body>
        <h1>J!ometry</h1>
        <h1>Recorded Games</h1>
        <div id="game-list"></div>
        <div id="footer">
            <p>This site is not affiliated with Jeopardy!. Data is taken from their published <a href="https://www.jeopardy.com/jbuzz/news-events/jeopardy-daily-box-scores">box scores.</a></p>
        </div>
        <script type="text/javascript">
            d3.csv("https://docs.google.com/spreadsheets/d/19HyOyYXHlYe_GI_b_gjfjTRF5OrXTH8S25btYGyPgdM/gviz/tq?tqx=out:csv&sheet=JBoxScores").then(function(data) {
                data.forEach(function(d) {
                    d['Date'] = csvDateParse(d['Date']);
                });
                console.log(data);
                data = Array.from(d3.group(data, d => d['Date']), ([date,dateData]) => [date, dateData[0]['Contestant'], dateData[1]['Contestant'], dateData[2]['Contestant']]);
                data.sort(d => d[0]);
                data.reverse();

                d3.select("#game-list").selectAll('div')
                    .data(data)
                    .enter()
                    .append('div')
                    .html(function(d) {
                        return '<a href="game.html?date=' + encodeURIComponent(dateFormat(d[0])) + '">' + dateFormat(d[0]) + '</a>&nbsp;' +
                            d.slice(1).join(' vs ');
                    });

            });
        </script>
    </body>
</html>